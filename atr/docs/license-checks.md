# 2.3. License checks

**Up**: `2.` [User guide](user-guide)

**Prev**: `2.2.` [Signing artifacts](signing-artifacts)

**Next**: `3.1.` [Running the server](running-the-server)

**Sections**:

* [Check selection](#check-selection)
* [Automatically excluded patterns](#automatically-excluded-patterns)
* [Apache RAT check](#apache-rat-check)
* [Lightweight license check](#lightweight-license-check)
* [Project policy exclusions](#project-policy-exclusions)

## Check selection

When you configure a release, you can choose which checks run on **source artifacts**:

* **Lightweight only**: Run just the lightweight check.
* **RAT only**: Run just the Apache RAT check.
* **Both**: Run both (the default).

**Binary artifacts** are always checked with the lightweight check. You can't turn this off.

## Automatically excluded patterns

These file patterns are automatically treated as "generated" and are ignored by **both** the RAT check and the lightweight check:

* `**/*.bundle.js`
* `**/*.chunk.js`
* `**/*.css.map`
* `**/*.js.map`
* `**/*.min.css`
* `**/*.min.js`
* `**/*.min.map`

## Apache RAT check

The Apache RAT (Release Audit Tool) scans every file in the archive.

### Standard exclusions

If you don't provide a custom exclusion file, RAT uses a default config that excludes:

* Standard SCM directories (like `.git`, `.svn`)
* IDE configuration files

### Custom exclusions

You can define your own exclusions by adding a `.rat-excludes` file to the archive.

> [!IMPORTANT]
> If a `.rat-excludes` file exists, the **standard exclusions are ignored**.

**Scan root behavior**:
You can only have one `.rat-excludes` file. The folder it's in becomes the **scan root**.

* Everything you want checked must be inside this scan root (or subfolders).
* Files outside this root might cause errors or get ignored in weird ways. It's best to just put `.rat-excludes` at the very top of your archive.

## Lightweight license check

This check looks at source files to see if they have valid license headers.

### Content-based exclusions

Files are skipped (considered generated) if the first 4KB of the file contains one of these markers:

* `Generated By:JJTree`
* `Generated By:JavaCC`

### Included file types

Unlike RAT, the lightweight check uses an allowlist of file extensions (e.g., `.js`, `.py`, `.java`, etc.). If a file extension isn't in the list, it gets ignored by default.

## Project policy exclusions

On top of file-based exclusions, you can configure exclusions right in the ATR web interface.
When editing a project, look for the **License Check Exclusions** fields:

* **RAT Exclusions**: newline-separated patterns to exclude from RAT checks.
* **Lightweight Exclusions**: newline-separated patterns to exclude from lightweight checks.

These settings follow the project, not the artifact.
